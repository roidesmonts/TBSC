define(["lmd/core/conf"],function(conf){var storage_no_cookie={isSupported:false,get:function(key,session){var stockData,storageValue;if(this.isSupported)try{storageValue=window.localStorage.getItem(key);if(storageValue===null||session===true)storageValue=window.sessionStorage.getItem(key);stockData=JSON.parse(storageValue)}catch(e){return null}if(!stockData)return null;if(stockData.timeout!==undefined){var now=(new Date).getTime(),diff=parseInt(stockData.timeout,10)-now;if(diff<0){this.remove(key);
return null}}if(stockData.data===undefined)return null;return stockData.data},set:function(key,data,timeout,session){var stockData={};stockData.data=data;if(typeof timeout!=="undefined"&&!isNaN(timeout))stockData.timeout=(new Date).getTime()+timeout;var stockDataJson=JSON.stringify(stockData);if(this.isSupported){try{if(typeof timeout!=="undefined"&&session===true)window.sessionStorage.setItem(key,stockDataJson);else window.localStorage.setItem(key,stockDataJson)}catch(e){return false}return true}},
remove:function(key,session){if(this.isSupported){if(session){window.sessionStorage.removeItem(key);return true}window.sessionStorage.removeItem(key);window.localStorage.removeItem(key);return true}}};storage_no_cookie.isSupported=function(){try{return window.hasOwnProperty("Storage")&&window.sessionStorage!==null&&window.localStorage!==null}catch(e){return false}}();return storage_no_cookie});
