define(["jquery","lmd/core/conf"],function($,conf){return{get:function(service,version,data,settings){if(typeof settings==="undefined")settings={};if(typeof settings.timeout==="undefined")settings.timeout=5E3;if(typeof settings.dataType==="undefined")settings.dataType="json";var jsonp=typeof settings.dataType==="string"&&settings.dataType==="jsonp";service.replace(/^\/?(.*)\/?$/,"$1");var url="/ws/"+version+"/"+service+"/";if(jsonp===true)url=window.location.protocol!=="https:"?window.location.protocol+
"//"+conf.www.location.hostname+url:window.location.protocol+"//"+conf.wwws.location.hostname+url;settings.data=data;settings.url=url;if(jsonp===true){var defer=$.Deferred();$.ajax(settings).then(function(data){if(typeof data!=="object"||typeof data.error==="object")defer.reject(data);else defer.resolve(data)},defer.reject);return defer}return $.ajax(settings)}}});
